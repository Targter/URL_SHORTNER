# Distributed URL Shortener Backend

**High-Availability Bun + Express Cluster with Nginx Load Balancing**

Production-ready, horizontally scalable backend architecture with automated load distribution across multiple application instances.

---

## ğŸ›  Tech Stack

| Layer             | Technology     |
| ----------------- | -------------- |
| **Runtime**       | Bun.js         |
| **Framework**     | Express.js     |
| **Load Balancer** | Nginx (Alpine) |
| **Database**      | MongoDB        |
| **Cache/Queue**   | Redis          |
| **Orchestration** | Docker Compose |

---

## ğŸ— Architecture

```
Internet â†’ Nginx (:80) â†’ [App-1, App-2, App-3...] â†’ MongoDB + Redis
```

**Key Features:**

- **Zero Downtime Scaling:** Add/remove instances without service interruption
- **Automatic Load Distribution:** Round-robin across healthy containers
- **Shared State:** Centralized MongoDB & Redis ensure data consistency
- **Network Isolation:** App instances accessible only via Nginx proxy

---

## ğŸš€ Quick Start

### Deploy with 3 instances

```bash
docker-compose up -d --build --scale app=3
```

### Scale to 5 instances (zero downtime)

```bash
docker-compose up -d --scale app=5
```

### Monitor traffic distribution

```bash
docker-compose logs -f app
```

---

## ğŸš¦ Endpoints

| Endpoint                  | Method | Description                                  |
| ------------------------- | ------ | -------------------------------------------- |
| `http://localhost/`       | GET    | Main application entry                       |
| `http://localhost/whoami` | GET    | Returns container ID (verify load balancing) |

**Test Load Balancing:**

```bash
curl http://localhost/whoami
# Response changes on each request â†’ confirms distribution
```

**Example Response:**

```json
{
  "instance_id": "8a3dcf22b1",
  "internal_port": 3000,
  "status": "Healthy"
}
```

---

## ğŸ”’ Security & Optimization

âœ… **Network Isolation** â€“ App containers not exposed publicly  
âœ… **Persistent Storage** â€“ MongoDB/Redis data survives restarts  
âœ… **Lightweight Images** â€“ Alpine Linux base reduces attack surface  
âœ… **Docker DNS** â€“ Automatic service discovery for scaled instances

---

## ğŸ“¦ Project Structure

```
.
â”œâ”€â”€ docker-compose.yml    # Orchestration config
â”œâ”€â”€ nginx.conf            # Load balancer rules
â”œâ”€â”€ Dockerfile            # Bun app container
â””â”€â”€ src/                  # Application code
```

---

## ğŸ”„ Next Steps

- [ ] Add health checks to `docker-compose.yml`
- [ ] Implement sticky sessions for stateful operations
- [ ] Configure HTTPS with Let's Encrypt
- [ ] Set up centralized logging (ELK Stack)

---

**License:** MIT | **Author:** Abhay Bansal
